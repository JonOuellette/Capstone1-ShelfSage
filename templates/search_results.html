<!-- search_results.html -->
{% extends "base.html" %}

{% block content %}
    <h1>Search Results</h1>

    {% if results %}
        <p>Showing results {{ start + 1 }} to {{ start + results|length }} of {{ total_results }}</p>
        <ul>
        {% for result in results %}
            <li>
                <h3><a href="{{ url_for('book_details', volume_id=result.id) }}">{{ result.volumeInfo.title }}</a></h3>
                <p>Author(s): {{ result.volumeInfo.authors|join(', ') }}</p>
                <p>Publisher: {{ result.volumeInfo.publisher }}</p>
                <p>Published Date: {{ result.volumeInfo.publishedDate }}</p>
                
                {% if result.volumeInfo.imageLinks %}
                        <img src="{{ result.volumeInfo.imageLinks.thumbnail }}" alt="Book Cover">
                {% else %}
                    <p>No image available</p>
                {% endif %}

                <form action="{{ url_for('add_book_to_library') }}" method="post">
                    <input type="hidden" name="book_id" value="{{ result.id }}">
                    <input type="hidden" name="title" value="{{ result.volumeInfo.title }}">
                    <input type="hidden" name="authors" value="{{ result.volumeInfo.authors|join(', ') }}">
                    <input type="hidden" name="publisher" value="{{ result.volumeInfo.publisher }}">
                    <input type="hidden" name="published_date" value="{{ result.volumeInfo.publishedDate }}">
                    <input type="hidden" name="image_links" value="{{ result.volumeInfo.imageLinks.thumbnail if result.volumeInfo.imageLinks else '' }}">
                    <!-- Include other necessary book details as hidden inputs -->
                    <!-- ... -->
                    <input type="submit" value="Add to My Library">
                </form>
                

            </li>
        {% endfor %}
        </ul>
        <nav>
            {% if start > 0 %}
                <a href="{{ url_for('search', query=query, type=type, start=start-max, max=max) }}">Previous</a>
            {% endif %}
            {% if start + max < total_results %}
                <a href="{{ url_for('search', query=query, type=type, start=start+max, max=max) }}">Next</a>
            {% endif %}
        </nav>
    
        {% else %}
        <p>No results found. Please try a different search.</p>
    {% endif %}
    
{% endblock %}
