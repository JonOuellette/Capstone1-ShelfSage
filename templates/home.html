{% extends "base.html" %}

{% block content %}
    <h1>Welcome to Shelf Sage</h1>

    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.search_query.label }}
            {{ form.search_query(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.search_type.label }}
            {{ form.search_type(class="form-control") }}
        </div>
        
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
    
    {% if results %}
        <h2>Search Results</h2>
        <ul>
            {% for result in results %}
                <li>
                    <h3>{{ result.volumeInfo.title }}</h3>
                    <p>Author(s): {{ result.volumeInfo.authors|join(', ') }}</p>
                    <p>Publisher: {{ result.volumeInfo.publisher }}</p>
                    <p>Published Date: {{ result.volumeInfo.publishedDate }}</p>
                    {% if result.volumeInfo.imageLinks %}
                        <img src="{{ result.volumeInfo.imageLinks.thumbnail }}" alt="Book Cover">
                    {% else %}
                        <p>No image available</p>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        
        <div class="pagination">
            {% if start > 0 %}
                <a href="{{ url_for('home', start=(start-max) if (start-max) > 0 else 0, query=query, type=type) }}">Previous</a>
            {% endif %}
        
            {% if start + max < total_results %}
                <a href="{{ url_for('home', start=start+max, query=query, type=type) }}">Next</a>
            {% endif %}
        </div>
       
        
    {% else %}
        No results found.
    {% endif %}
    
{% endblock %}
